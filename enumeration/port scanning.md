## using netcat

### tcp scanning

tcp syn packet is sent and recieved to complete handshake, we can make a port scanner with netcat

> nc-nvv -w1-z 10.10.10.10. 3512-5000 

here - w specifies timeout in seconds and z is used to specify zero input output mode so no data is sent and used for scanning.

### udp scanning

UDP s stateless and involves 3 way handshake- different from tcp

nc -nv -u -z -w 1 10.10.10.1 500-1000

we send empty packets and if UDP port is open packet will be processed by application and a response is recieved on basis of how application is programmed to respond to empty packs. example application sends no response

if the port is clsed then ICMP port unreachable text is sent back. but this method is not reliable when port is filtered with a firewall

# nmap

default scan scans 1000 most popular ports

### using ip tables to monitor the traffic

- I option to insert a new rule, in this case includes both input and output chains.  -s to specifiy the source ip adress and -d to specify the dest. ip address and -j to accept the traffic and -z to zero the packet and byte counters in all chains

```
kali@kali:~$ sudo iptables -I INPUT 1 -s 10.11.1.220 -j ACCEPT
kali@kali:~$ sudo iptables -I OUTPUT 1 -d 10.11.1.220 -j ACCEPT
kali@kali:~$ sudo iptables -Z
```
after runnign nmap 

use iptables with -v to add verbosity and -n to enable numeric output and -L to list all rules present in all chains

iptables -Z option si used to zero all output so we can view a new result again its like clearscreen in terminal

## stealth?SYN scanning

SYN packets are send without completing the hand shake. when packets are send back portscanner doesnt bother to send the fianal SYN-ACK to complete three way handshake

-sS

Please note that term “stealth” refers to the fact that, in the past, primitive
firewalls would fail to log incomplete TCP connections. This is no longer the case
with modern firewalls and even if the stealth moniker has stuck around, it could
be misleading.

## tcp connect scanning

when nmap doesnt have raw priveleges, nmap defaults to TCP connect scan. Since a Nmap TCP connect scan makes use of the
Berkeley sockets API to perform the three-way handshake, it does not require elevated privileges.
However, because Nmap has to wait for the connection to complete before the API will return the
status of the connection, a connect scan takes much longer to complete than a SYN scan.

-sT

## UDP scanning

When performing a UDP scan, 202 Nmap will use a combination of two different methods to
determine if a port is open or closed. For most ports, it will use the standard “ICMP port
unreachable” method described earlier by sending an empty packet to a given port. However, for
common ports, such as port 161, which is used by SNMP, it will send a protocol-specific SNMP
packet in an attempt to get a response from an application bound to that port. To perform a UDP
scan, the -sU option is used and sudo is required to access raw sockets

can be used with -sS to build complete picture of target

## network sweeping

-sn 
eg. nmap -sn 10.10.10.1-254

-oG x.txt to save the output in a text file

To save time

For example, let’s conduct a TCP connect scan for the top twenty TCP ports with
the --top-ports option and enable OS version detection, script scanning, and traceroute with -A :
kali@kali:~$ nmap -sT -A --top-ports=20 10.11.1.1-254 -oG top-port-sweep.txt

/usr/share/nmap/nmap-services determines top 20 ports

## OS fingerprinting

with -O option

## banner grbbing/service enumeration

inspecting service banners -sV

with -A to indentify services 

## NSE 

usage: nmap --script=dns-zone-transfer -p 53 ns2.megacorpone.com

/usr/share/nmap/scripts

1. the smb-os-discovery script attempts to connect to the SMB service on a target
system and determine its operating system

2. dns-zone-transfer : Requests a zone transfer (AXFR) from a DNS server.

# Masscan

arguably fastest port scanner

sudo masscan -p80 10.0.0.0/8

including --rate to specify the desired
rate of packet transmission, -e to specify the raw network interface to use, and --router-ip to
specify the IP address for the appropriate gateway:

> sudo masscan -p80 10.11.1.0/24 --rate=1000 -e tap0 --router-ip 10.11.0.1



