## scanning for netbios service

listens typically on port 159 TCP aswellas several UDP ports

NetBIOS is an independent
session layer protocol and service that allows computers on a local network to communicate with
each other. While modern implementations of SMB can work without NetBIOS, NetBIOS over TCP
(NBT) 211 is required for backward compatibility and is often enabled together. For this reason, the
enumeration of these two services often goes hand-in-hand.

### using nmap

nmap -v -p 139,445 -oG smb.txt 10.11.1.1-254

/usr/share/nmap/scripts

Let’s try the smb-os-discovery module:
kali@kali:~$ nmap -v -p 139, 445 --script=smb-os-discovery 10.11.1.227

To check for known SMB protocol vulnerabilities, we can invoke one of the smb-vuln NSE scripts.
We will take a look at smb-vuln-ms08-067 , which uses the --script-args option to pass
arguments to the NSE script.

```
Please Note: If we set the script parameter unsafe=1 , the scripts that will run are
almost (or totally) guaranteed to crash a vulnerable system. Needless to say,
exercise extreme caution when enabling this argument, especially when
scanning production systems.
```

nmap -v -p 139,445 --script=smb-vuln-ms08-067 --script-args=unsafe=1 10.1
1.1.5














The first thing we need to do is determine if SMB is present on the target. It's usually a safe bet that if ports 139 and 445 are open, SMB is running.

## enum4linux

enum4linux -U 10.10.0.50
The most basic usage of Enum4linux takes an option and the IP address of the target. We can use the -U flag to view users on the target:

The -S flag will give us information about the SMB shares on the machine

We can use the -o flag to get some operating system information:
If the target is a domain controller, the -l flag will attempt to get some limited information about LDAP running on the server:

Printers are often shared on a network and can often be an overlooked attack vector. We can use the -i flag to view any printer information:

Perhaps the most useful option for this tool is the option to run all these tests at once. That way we can quickly get all the SMB information we need in one scan — use the -a flag to run all simple enumeration:

## Use Smbclient to List Shares & Transfer Files

Smbclient is a tool used to access SMB resources on a server, much like an FTP client is used to access files. It offers a simple command-line interface that is trivial to use if you're at all familiar with FTP.

sudo smbclient -N \\\\10.10.10.27\\backups
